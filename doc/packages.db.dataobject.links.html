<HTML
><HEAD
><TITLE
>Automatic Table Linking</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="SQL Builder and Data Modeling Layer"
HREF="packages.db.dataobject.html"><LINK
REL="PREVIOUS"
TITLE="Advanced Filters"
HREF="packages.db.dataobject.filters.html"><LINK
REL="NEXT"
TITLE="AutoForm Utilities and Debugging"
HREF="packages.db.dataobject.utils.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="packages.db.dataobject.filters.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="packages.db.dataobject.utils.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="packages.DB.DataObject.links">Automatic Table Linking</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN4151"
></A
>Automatic Table Linking&nbsp;--&nbsp;
       Automatic Table Linking - ::getLink(), ::getLinks()
      </DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN4154"
></A
><H2
>Automating the colleciton of related data</H2
><P
>&#13;        When designing a database, often some tables are related to others - a membership table would contain
        a reference to a person's id and the group id that they are a member of. Using the Link methods, you 
        can automatically fetch objects into the parents variables.
      </P
><P
>&#13;        The Automated method of doing this is heavily dependant on naming columns relating to databases, for example in the
        membership described above, you would have to have a column called person_id, group_id for the automated Link 
        methods to understand which table to fetch the data from. The principle is TABLENAME_ANYTHING, and it 
        will always attempt to find primary keys that match the value of field, the getLinks() methods will autoload 
        the related object into $object-&#62;_tablename_anything
      </P
><P
>&#13;       The other way of using getLink() is to use it with the second parameter which is the table name of the related
       table, it will then query the primary key on that table to see if it matches the value of the requested row.
       In this method however the getLinks() method will not work, as it will not know the related table names.
      </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN4159"
></A
><H2
>::getLink()</H2
><P
>&#13;      Gets the Related Row Object from the Related Table
      </P
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4162"><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
><B
CLASS="function"
>::getLink</B
></CODE
> (string Row [, string Table])</CODE
></P
><P
></P
></DIV
><P
>&#13;        Gets the related Object 
        <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4172"><P
><B
>Example 1.  Getting the related object </B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>&#60;?
$person = new DataObjects_Person;
$person-&#62;get(12);
$group = $person-&#62;getLink('group_owner');
echo $group-&#62;name;
$group = $person-&#62;getLink('colourid','hair');

?&#62;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
      </P
><P
>&#13;        
        This would execute the following SQL statements, and fetch the data
       <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4176"><P
><B
>Example 2.  Resulting SQL </B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="sql"
>SELECT * FROM person WHERE id=12
SELECT * FROM group WHERE id=3
SELECT * FROM hair WHERE id=4</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
        
        
      </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN4179"
></A
><H2
>::getLinks()</H2
><P
>&#13;      Loads the all the related objects into the main object, based on the naming of columns using the tablename_xxx 
      naming method, and sets   the main objects variables with the row name prefixed with a _
      </P
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4182"><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
><B
CLASS="function"
>::getLinks</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
><P
>&#13;        Loads all the related Objects 
        <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4189"><P
><B
>Example 3.  Loading all the related objects </B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>&#60;?
$person = new DataObjects_Person;
$person-&#62;get(12);
$person-&#62;getLinks();
print_r($person-&#62;_group);
print_r($person-&#62;_eyes);
?&#62;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
      </P
><P
>&#13;        
        This would execute the following SQL statement, and fetch the data
       <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4193"><P
><B
>Example 4.  Resulting SQL </B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="sql"
>SELECT * FROM person WHERE id=12
SELECT * FROM eyes WHERE id=11
SELECT * FROM group WHERE id=3</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
        
        
      </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="packages.db.dataobject.filters.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="packages.db.dataobject.utils.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Advanced Filters</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="packages.db.dataobject.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>AutoForm Utilities and Debugging</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>